import java.text.DecimalFormat;

import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Window extends JFrame {
	private static final long serialVersionUID = -8255319694373975038L;
	private final Canvas canvas = new Canvas();

	public Window () {
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		setSize(752, 502);
		setResizable(false);
		setTitle("Waves");
		
		add(new Options());
		add(canvas);
		
		setVisible(true);
	}
	
	public static void main (String[] argv) {
		Window window = new Window();
		
		while (true) {
			window.repaint();
		}
	}
	
	private class Options extends JPanel {
		private static final long serialVersionUID = -3230902972827554859L;

		JSlider friction = new JSlider(0, 99);
		JLabel currentFriction = new JLabel("Friction: 0");
		JSlider amplitude = new JSlider(0, 99);
		JLabel currentAmplitude = new JLabel("Amplitude: 50");
		JSlider frequency = new JSlider(0, 200);
		JLabel currentFrequency = new JLabel ("Frequency: 5.0");
		
		public Options () {
			this.setSize(200, 500);
			this.add(new JButton("Setup"));
			this.add(new JButton("Start"));
			
			friction.addChangeListener(new sliderListener());
			amplitude.addChangeListener(new sliderListener());
			frequency.addChangeListener(new sliderListener());
			
			add(currentFriction);
			friction.setMajorTickSpacing(10);
			friction.setPaintTicks(true);
			add(friction);
			
//			add(new JLabel("Frequency fine adjustment"));
//			add(new JSlider(0, 1));
			
			add(currentAmplitude);
			amplitude.setMajorTickSpacing(10);
			amplitude.setPaintTicks(true);
			this.add(amplitude);
			
			add(currentFrequency);
			frequency.setMajorTickSpacing(20);
			frequency.setPaintTicks(true);
			add(frequency);
			
			this.add(new JCheckBox("fixed end"));
			
		}
		
		public class sliderListener implements ChangeListener {
			final private DecimalFormat df = new DecimalFormat("##.#");
			@Override
			public void stateChanged(ChangeEvent ce) {
				JSlider source = (JSlider) ce.getSource();
				
				if (source == friction) {
					currentFriction.setText("Friction: " + friction.getValue());
				} else if (source == amplitude) {
					currentAmplitude.setText("Amplitude: " + amplitude.getValue());
					canvas.getWave().setAmplitude(amplitude.getValue());
				} else if (source == frequency){
					currentFrequency.setText("Frequency: " + df.format(frequency.getValue()*.1));
				}
			}
		}
	}
}
