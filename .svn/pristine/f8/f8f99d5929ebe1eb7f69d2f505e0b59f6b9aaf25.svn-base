import java.text.DecimalFormat;
import javax.swing.*;
import javax.swing.event.*;

public class Options extends JPanel {
	private static final long serialVersionUID = -3230902972827554859L;
	
	private final Wave wave;

	private final JSlider amplitude = new JSlider(0, 99);
	private final JLabel currentAmplitude = new JLabel("Amplitude: 50");
	private final JSlider frequency = new JSlider(0, 200);
	private final JLabel currentFrequency = new JLabel ("Frequency: 5.0");
		
	public Options (Wave wave) {
		// Set the canvas.
		this.wave = wave;
		
		setLayout(new RiverLayout());
		
		// Add event listeners.
		amplitude.addChangeListener(new sliderListener());
		frequency.addChangeListener(new sliderListener());
		
		// Set the size of the options pane (200 by 500 pixels)
		this.setSize(200, 300);
		
		// Add the amplitude slider.
		add(currentAmplitude);
		amplitude.setMajorTickSpacing(10);
		amplitude.setPaintTicks(true);
		this.add("br", amplitude);
		
		// Add the frequency slider.
		add("br", currentFrequency);
		frequency.setMajorTickSpacing(20);
		frequency.setPaintTicks(true);
		add("br", frequency);
			
		// The Frequency fine adjustment slider...
//		add(new JLabel("Frequency fine adjustment"));
//		add(new JSlider(0, 1));
		
	}
		
	private class sliderListener implements ChangeListener {
		final private DecimalFormat df = new DecimalFormat("##.#");
		@Override
		public void stateChanged(ChangeEvent ce) {
			JSlider source = (JSlider) ce.getSource();
			
			if (source == amplitude) {
				currentAmplitude.setText("Amplitude: " + amplitude.getValue());
				wave.setAmplitude(amplitude.getValue());
			} else if (source == frequency){
				currentFrequency.setText("Frequency: " + df.format(frequency.getValue()*.1));
				wave.setFrequency(frequency.getValue());
			}
		}
	}
}